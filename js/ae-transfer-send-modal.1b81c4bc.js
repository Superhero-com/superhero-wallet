"use strict";(self["webpackChunksuperhero_wallet"]=self["webpackChunksuperhero_wallet"]||[]).push([[522],{29573:(e,t,a)=>{a.r(t),a.d(t,{default:()=>xe});var n=a(20641);function s(e,t,a,s,r,o){var l=(0,n.g2)("TransferSendBase");return(0,n.uX)(),(0,n.Wv)(l,{protocol:e.PROTOCOLS.aeternity,"current-step":e.currentStep,"hide-arrow-send-icon":e.isMultisig,"custom-primary-button-text":e.customPrimaryButtonText,"sending-disabled":e.isSendingDisabled,onClose:e.resolve,onStepNext:e.proceedToNextStep,onStepPrev:e.editTransfer},{content:(0,n.k6)((function(){return[((0,n.uX)(),(0,n.Wv)((0,n.$y)(e.currentStepConfig.component),{ref:"currentRenderedComponent",transferData:e.transferData,"onUpdate:transferData":t[0]||(t[0]=function(t){return e.transferData=t}),"is-multisig":e.isMultisig,"is-address-chain":e.isAddressChain,"is-address-url":e.isAddressUrl,onSuccess:e.currentStepConfig.onSuccess,onError:t[1]||(t[1]=function(t){return e.error=t})},null,40,["transferData","is-multisig","is-address-chain","is-address-url","onSuccess"]))]})),_:1},8,["protocol","current-step","hide-arrow-send-icon","custom-primary-button-text","sending-disabled","onClose","onStepNext","onStepPrev"])}var r=a(1287),o=(a(99449),a(50953)),l=a(46992),i=a(65563),u=a(31189),c=a(67440),d=a(59755),p=a(42346),m=(a(76918),a(23288),a(9868),a(26099),a(38781),a(90033)),f={class:"multisig-addresses-row"},v={key:0,class:"payload-add-wrapper"},g={class:"payload-options"};function y(e,t,a,s,r,o){var l=(0,n.g2)("ModalHeader"),i=(0,n.g2)("InfoBox"),u=(0,n.g2)("FormSelect"),c=(0,n.g2)("AccountItem"),d=(0,n.g2)("DetailsItem"),p=(0,n.g2)("TransferSendRecipient"),y=(0,n.g2)("BtnMaxAmount"),A=(0,n.g2)("TransferSendAmount"),b=(0,n.g2)("BtnText"),h=(0,n.g2)("BtnHelp"),x=(0,n.g2)("BtnIcon"),k=(0,n.g2)("PayloadDetails"),_=(0,n.g2)("TransferSendFormBase");return(0,n.uX)(),(0,n.Wv)(_,(0,n.v6)(e.$attrs,{"transfer-data":e.transferData,fee:+e.fee.toFixed(),"fee-symbol":e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity,class:"transfer-send-form"}),(0,n.eX)({recipient:(0,n.k6)((function(){return[(0,n.bF)(p,{modelValue:e.formModel.address,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formModel.address=t}),modelModifiers:{trim:!0},errors:e.errors,"is-tip-url":e.isTipUrl,protocol:e.PROTOCOLS.aeternity,placeholder:e.isUrlTippingEnabled?e.$t("modals.send.recipientPlaceholderUrl"):e.$t("modals.send.recipientPlaceholder"),"validation-rules":Object.assign(Object.assign({aens_name_registered_or_address_or_url:e.isUrlTippingEnabled,aens_name_registered_or_address:!e.isUrlTippingEnabled},e.isMultisig?{address_not_same_as:[e.multisigVaultAddress,e.PROTOCOLS.aeternity]}:{}),{token_to_an_address:[!e.isAe]}),onOpenQrModal:e.openScanQrModal},null,8,["modelValue","errors","is-tip-url","protocol","placeholder","validation-rules","onOpenQrModal"])]})),amount:(0,n.k6)((function(){var a;return[(0,n.bF)(A,{modelValue:e.formModel.amount,"onUpdate:modelValue":[t[2]||(t[2]=function(t){return e.formModel.amount=t}),t[3]||(t[3]=function(t){return e.shouldUseMaxAmount=!1})],"custom-label":e.isMultisig?e.$t("modals.multisigTxProposal.amount"):"",errors:e.errors,"selected-asset":e.formModel.selectedAsset,readonly:e.isMultisig,protocol:e.PROTOCOLS.aeternity,"blink-on-change":e.shouldUseMaxAmount,"validation-rules":Object.assign(Object.assign(Object.assign(Object.assign({},+e.balance.minus(e.fee)>0&&!e.isMultisig?{max_value:e.max}:{}),e.isMultisig?{enough_ae_signer:e.fee.toString()}:{enough_coin:e.fee.toString()}),+e.balance.minus(e.fee)>0&&e.isMultisig?{max_value_vault:null===(a=e.activeMultisigAccount)||void 0===a?void 0:a.balance.toString()}:{}),{ae_min_tip_amount:e.isTipUrl}),onAssetSelected:e.handleAssetChange},{"label-after":(0,n.k6)((function(){return[e.isMultisig?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(y,{key:0,"is-max":e.shouldUseMaxAmount,onClick:e.toggleMaxAmount},null,8,["is-max","onClick"]))]})),_:1},8,["modelValue","custom-label","errors","selected-asset","readonly","protocol","blink-on-change","validation-rules","onAssetSelected"])]})),_:2},[e.isMultisig?{name:"header",fn:(0,n.k6)((function(){return[(0,n.bF)(l,{title:e.$t("modals.multisigTxProposal.title")},null,8,["title"]),e.hasMultisigTokenWarning?((0,n.uX)(),(0,n.Wv)(i,{key:0,type:e.INFO_BOX_TYPES.warning,text:e.$t("modals.multisigTxProposal.tokenWarning")},null,8,["type","text"])):(0,n.Q3)("",!0),(0,n.Lk)("div",f,[(0,n.bF)(d,{class:"multisig-address-item"},{label:(0,n.k6)((function(){return[e.multisigVaultOwnedByManyAccounts?((0,n.uX)(),(0,n.Wv)(u,{key:0,options:e.accountsAllowedToProposeTxSelectOptions,"default-text":e.$t("modals.multisigTxProposal.signingAccount"),value:e.activeAccount.address,class:"account-selector","persistent-default-text":"",unstyled:"","account-select":"",onSelect:t[0]||(t[0]=function(t){return e.selectAccount(t)})},null,8,["options","default-text","value"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,m.v_)(e.$t("modals.multisigTxProposal.signingAccount")),1)],64))]})),value:(0,n.k6)((function(){return[(0,n.bF)(c,{address:e.activeAccount.address,protocol:e.activeAccount.protocol},null,8,["address","protocol"])]})),_:1}),(0,n.bF)(d,{class:"multisig-address-item",label:e.$t("modals.multisigTxProposal.multisigVault")},{value:(0,n.k6)((function(){return[(0,n.bF)(c,{address:e.multisigVaultAddress,protocol:e.PROTOCOLS.aeternity},null,8,["address","protocol"])]})),_:1},8,["label"])])]})),key:"0"}:void 0,e.isAe?{name:"extra",fn:(0,n.k6)((function(){return[e.formModel.payload&&e.formModel.payload.length?((0,n.uX)(),(0,n.Wv)(k,{key:1,payload:e.formModel.payload,class:"payload-details"},{default:(0,n.k6)((function(){return[(0,n.Lk)("div",g,[(0,n.bF)(x,{size:"sm",dimmed:"",icon:e.EditIcon,onClick:e.editPayload},null,8,["icon","onClick"]),(0,n.bF)(x,{size:"sm","icon-variant":"danger",dimmed:"",icon:e.DeleteIcon,onClick:e.clearPayload},null,8,["icon","onClick"])])]})),_:1},8,["payload"])):((0,n.uX)(),(0,n.CE)("div",v,[(0,n.bF)(b,{icon:e.PlusCircleIcon,text:e.$t("modals.send.payload"),onClick:e.editPayload},null,8,["icon","text","onClick"]),(0,n.bF)(h,{title:e.$t("modals.payloadInfo.title"),msg:e.$t("modals.payloadInfo.msg")},null,8,["title","msg"])]))]})),key:"1"}:void 0]),1040,["transfer-data","fee","fee-symbol","protocol"])}var A=a(2327),b=(a(2008),a(74423),a(21699),a(75220)),h=a(32118),x=a(92350),k=a(58338),_=a(1756),T=a(14812),w=a(29086),O=a(19442),S=a(72402),M=a(14552),C=a(67311),I=a(94622),P=a(37134),F=a(31157),D=a(43863),E=a(70654),R=a(29682),L=a(94386),B=a(35240),W=a(71403),$=function(e,t,a,n){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,r){function o(e){try{i(n.next(e))}catch(t){r(t)}}function l(e){try{i(n["throw"](e))}catch(t){r(t)}}function i(e){e.done?a(e.value):s(e.value).then(o,l)}i((n=n.apply(e,t||[])).next())}))};const U=(0,n.pM)({name:"AeTransferSendForm",components:{BtnMaxAmount:E.A,TransferSendAmount:R.A,TransferSendRecipient:D.A,DetailsItem:C.A,BtnIcon:I.A,PayloadDetails:P.A,BtnHelp:F.A,BtnText:M.A,TransferSendFormBase:_.A,InfoBox:S.A,ModalHeader:T.A,AccountItem:w.A,FormSelect:O.A},model:{prop:"transferData"},props:{transferData:{type:Object,required:!0},isMultisig:Boolean},emits:["update:transferData","success","error"],setup:function(e,t){var a=t.emit,s=(0,b.lq)(),r=(0,o.KR)(!1),l=(0,o.KR)(!1),p=(0,o.KR)(!1),m=(0,o.KR)(null),f=(0,c.U8)(),v=f.openModal,g=(0,c.ci)(),y=g.activeMultisigAccount,_=(0,c.ty)(),T=_.balance,w=(0,c.ZN)(),O=w.marketData,M=(0,c.oV)(),C=M.accounts,I=M.activeAccount,P=M.setActiveAccountByGlobalIdx,F=M.setActiveAccountByAddress,D=(0,c.Y7)(),E=D.getProtocolAvailableTokens;function R(t,a){var n=h.C.getAdapter(i.yv.aeternity).getDefaultCoin(O.value,+T.value);return t?e.isMultisig&&![d.kf,d.cK].includes(t)?void(l.value=!0):(l.value=!1,E(i.yv.aeternity)[t]||n):a?void 0:n}var U=(0,x.x)({transferData:e.transferData,getSelectedAssetValue:R}),N=U.formModel,V=U.errors,X=U.hasError,K=U.invoiceId,j=U.invoiceContract,Y=U.clearPayload,Q=U.handleAssetChange,G=U.updateFormModelValues,q=U.openScanQrModal,H=(0,c.Ym)({formModel:N}),z=H.max,Z=H.fee,J=(0,n.EW)((function(){var e;return null===(e=y.value)||void 0===e?void 0:e.gaAccountId})),ee=(0,n.EW)((function(){var e;return(null===(e=N.value.selectedAsset)||void 0===e?void 0:e.contractId)===d.cK})),te=(0,n.EW)((function(){return!!N.value.address&&p.value&&(0,u.Ks)(N.value.address)&&!(0,k.F7)(N.value.address)})),ae=C.value.filter((function(e){var t,a=e.address;return null===(t=y.value)||void 0===t?void 0:t.signers.includes(a)})),ne=(0,n.EW)((function(){return(null===ae||void 0===ae?void 0:ae.length)>1})),se=(0,n.EW)((function(){return(0,u.dZ)(ae)}));function re(){v(i.kQ,{payload:N.value.payload}).then((function(e){N.value.payload=e}))["catch"]((function(){return null}))}function oe(e){e&&(F(e),N.value.amount&&m.value&&m.value.validate())}function le(){r.value=!r.value,r.value&&(N.value.amount=z.value)}function ie(){var e,t=Object.assign(Object.assign({},N.value),{fee:Z.value,total:(ee.value?+Z.value.toFixed():0)+ +((null===(e=N.value)||void 0===e?void 0:e.amount)||0),invoiceId:K.value,invoiceContract:j.value});return a("update:transferData",t),(0,n.dY)()}function ue(){return $(this,void 0,void 0,(0,A.A)().mark((function e(){return(0,A.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(X.value){e.next=4;break}return e.next=3,ie();case 3:a("success");case 4:case"end":return e.stop()}}),e)})))}return(0,n.wB)(X,(function(e){return a("error",e)}),{deep:!0}),(0,n.wB)(N,(function(){ie()}),{deep:!0}),(0,n.wB)(z,(function(e){r.value&&(N.value.amount=e)})),(0,n.wB)(I,(function(){var t,a,n;e.isMultisig&&!(null===(t=y.value)||void 0===t?void 0:t.signers.includes(I.value.address))&&P(ae[0].globalIdx);var r=s.query;(0,u.DB)(r)&&(p.value=!0),G(Object.assign(Object.assign({},r),{token:r.token||(null===(n=null===(a=N.value)||void 0===a?void 0:a.selectedAsset)||void 0===n?void 0:n.contractId)}))}),{deep:!0,immediate:!0}),{INFO_BOX_TYPES:S.F,AE_SYMBOL:d.kf,PROTOCOLS:i.yv,isAe:ee,shouldUseMaxAmount:r,hasMultisigTokenWarning:l,multisigVaultAddress:J,activeMultisigAccount:y,multisigVaultOwnedByManyAccounts:ne,accountsAllowedToProposeTxSelectOptions:se,formModel:N,isUrlTippingEnabled:p,fee:Z,max:z,errors:V,balance:T,isTipUrl:te,activeAccount:I,editPayload:re,clearPayload:Y,openScanQrModal:q,handleAssetChange:Q,toggleMaxAmount:le,selectAccount:oe,submit:ue,EditIcon:L.A,DeleteIcon:B.A,PlusCircleIcon:W.A}}});var N=a(66262);const V=(0,N.A)(U,[["render",y],["__scopeId","data-v-7e0b5a24"]]),X=V;a(62010);var K={class:"review-tip-wrapper"},j={class:"account-info"},Y={class:"name-address-wrapper"},Q={key:1},G={class:"token-amount-wrapper"},q={class:"lowercase"},H={class:"tip-url"},z={class:"subtitle"};function Z(e,t,a,s,r,o){var l=(0,n.g2)("LinkButton"),i=(0,n.g2)("i18n-t"),u=(0,n.g2)("ModalHeader"),c=(0,n.g2)("Avatar"),d=(0,n.g2)("Truncate"),p=(0,n.g2)("AddressTruncated"),f=(0,n.g2)("TokenAmount"),v=(0,n.g2)("FormTextarea");return(0,n.uX)(),(0,n.CE)("div",K,[(0,n.bF)(u,{title:e.$t("pages.send.sendingCryptoToUrl")},{subtitle:(0,n.k6)((function(){return[(0,n.bF)(i,{keypath:"pages.send.tipInfo",tag:"span",class:"subtitle",scope:"global"},{default:(0,n.k6)((function(){return[(0,n.bF)(l,{href:r.AGGREGATOR_URL,class:"link"},{default:(0,n.k6)((function(){return[(0,n.eW)((0,m.v_)(e.$t("pages.notifications.superhero")),1)]})),_:1},8,["href"])]})),_:1})]})),_:1},8,["title"]),(0,n.Lk)("div",j,[(0,n.bF)(c,{address:s.activeAccount.address,size:"lg"},null,8,["address"]),(0,n.Lk)("div",Y,[s.activeAccount.name?((0,n.uX)(),(0,n.Wv)(d,{key:0,str:s.activeAccount.name},null,8,["str"])):((0,n.uX)(),(0,n.CE)("div",Q,(0,m.v_)(o.getDefaultAccountLabel({idx:s.activeAccount.idx})),1)),(0,n.bF)(p,{"show-explorer-link":"",address:s.activeAccount.address,protocol:r.PROTOCOLS.aeternity},null,8,["address","protocol"])])]),(0,n.Lk)("span",G,[(0,n.eW)((0,m.v_)(e.$t("pages.send.sending"))+" ",1),(0,n.bF)(f,{amount:+a.transferData.amount,symbol:o.tokenSymbol,"hide-fiat":o.isAex9,protocol:r.PROTOCOLS.aeternity,"data-cy":"review-total"},null,8,["amount","symbol","hide-fiat","protocol"]),(0,n.Lk)("span",q,(0,m.v_)(e.$t("pages.send.to")),1)]),(0,n.Lk)("div",H,(0,m.v_)(a.transferData.address),1),(0,n.bF)(v,{modelValue:r.note,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.note=e}),size:"sm",label:e.$t("pages.send.messageUrlOwner"),message:o.noteError},{"label-after":(0,n.k6)((function(){return[(0,n.Lk)("span",{class:(0,m.C4)(["counter",{"below-zero":o.charactersLeft<0}])},(0,m.v_)(o.charactersLeft),3)]})),_:1},8,["modelValue","label","message"]),(0,n.Lk)("span",z,(0,m.v_)(e.$t("pages.tipPage.claimingExplanation")),1)])}var J=a(38151),ee=a(47206),te=a(75303),ae=a(75417),ne=a(30661),se=a(39893),re=a(28192);const oe={name:"TransferReviewTip",components:{AddressTruncated:re.A,LinkButton:ee.A,ModalHeader:T.A,TokenAmount:te.A,FormTextarea:ae.A,Avatar:ne.A,Truncate:se.A},model:{prop:"transferData"},props:{transferData:{type:Object,required:!0}},setup:function(){var e=(0,c.oV)(),t=e.activeAccount;return{activeAccount:t}},data:function(){return{AGGREGATOR_URL:i.G9,AE_CONTRACT_ID:d.cK,PROTOCOLS:i.yv,note:"",noteMaxLength:280}},computed:{isAex9:function(){var e;return(null===(e=this.transferData)||void 0===e||null===(e=e.selectedAsset)||void 0===e?void 0:e.contractId)!==d.cK},noteError:function(){return this.note.length>this.noteMaxLength?this.$t("pages.tipPage.maxNoteLengthError"):null},charactersLeft:function(){return this.noteMaxLength-this.note.length},tokenSymbol:function(){var e;return(null===(e=this.transferData.selectedAsset)||void 0===e?void 0:e.symbol)||"-"}},watch:{noteError:function(e){this.$emit("error",!!e)},note:function(e){this.$emit("input",(0,J.A)((0,J.A)({},this.transferData),{},{note:e}))}},methods:{getDefaultAccountLabel:u.$W,submit:function(){this.noteError||this.$emit("success")}}},le=(0,N.A)(oe,[["render",Z],["__scopeId","data-v-abf3c1cc"]]),ie=le;var ue={key:0,class:"multisig-account"};function ce(e,t,a,s,r,o){var l=(0,n.g2)("AccountItem"),i=(0,n.g2)("DetailsItem"),u=(0,n.g2)("TokenAmount"),c=(0,n.g2)("TransferReviewBase");return(0,n.uX)(),(0,n.Wv)(c,{title:e.isMultisig?e.$t("modals.multisigTxProposal.title"):void 0,"without-subtitle":e.isMultisig,"sender-label":e.isMultisig?e.$t("modals.multisigTxProposal.signingAddress"):void 0,"base-token-symbol":e.AE_SYMBOL,"transfer-data":e.transferData,loading:e.loading,"avatar-name":e.isAddressChain?e.transferData.address:void 0,"show-fiat":!e.isSelectedAssetAex9,protocol:e.PROTOCOLS.aeternity,class:"transfer-review"},(0,n.eX)({subheader:(0,n.k6)((function(){return[e.isMultisig?((0,n.uX)(),(0,n.CE)("div",ue,[(0,n.bF)(l,{address:e.activeMultisigAccount.gaAccountId,protocol:e.PROTOCOLS.aeternity},null,8,["address","protocol"])])):(0,n.Q3)("",!0)]})),"additional-fee":(0,n.k6)((function(){return[e.isMultisig?((0,n.uX)(),(0,n.Wv)(i,{key:0,class:"details-item",label:e.$t("modals.multisigTxProposal.fee")},{value:(0,n.k6)((function(){return[(0,n.bF)(u,{amount:e.PROPOSE_TRANSACTION_FEE,symbol:e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity,"hide-fiat":"","high-precision":"","data-cy":"multisig-review-fee"},null,8,["amount","symbol","protocol"])]})),_:1},8,["label"])):(0,n.Q3)("",!0)]})),total:(0,n.k6)((function(){return[e.isSelectedAssetAex9?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(i,{key:0,label:e.$t("common.total"),class:"details-item"},{value:(0,n.k6)((function(){return[(0,n.bF)(u,{amount:+e.transferData.total,symbol:e.AE_SYMBOL,protocol:e.PROTOCOLS.aeternity,"high-precision":"","data-cy":"review-total"},null,8,["amount","symbol","protocol"])]})),_:1},8,["label"]))]})),_:2},[e.isAddressUrl?{name:"recipient",fn:(0,n.k6)((function(){return[(0,n.bF)(i,{"data-cy":"review-tip-url",class:"tip-url details-item",label:e.$t("pages.send.receivingUrl"),value:e.transferData.address},null,8,["label","value"])]})),key:"0"}:void 0]),1032,["title","without-subtitle","sender-label","base-token-symbol","transfer-data","loading","avatar-name","show-fiat","protocol"])}a(44114),a(2892);var de=a(91087),pe=a(90973);const me=JSON.parse('[{"namespace":{"name":"Option","typedefs":[]}},{"namespace":{"name":"ListInternal","typedefs":[]}},{"namespace":{"name":"List","typedefs":[]}},{"namespace":{"name":"String","typedefs":[]}},{"contract":{"functions":[{"arguments":[{"name":"_1","type":"int"},{"name":"_2","type":"int"}],"name":"set_paid","payable":false,"returns":"unit","stateful":true}],"kind":"contract_interface","name":"PoS","payable":false,"typedefs":[]}},{"contract":{"event":{"variant":[{"Transfer":["address","address","int"]},{"Allowance":["address","address","int"]},{"Burn":["address","int"]},{"Swap":["address","int"]}]},"functions":[{"arguments":[],"name":"aex9_extensions","payable":false,"returns":{"list":["string"]},"stateful":false},{"arguments":[{"name":"name","type":"string"},{"name":"decimals","type":"int"},{"name":"symbol","type":"string"},{"name":"initial_owner_balance","type":{"option":["int"]}}],"name":"init","payable":false,"returns":"FungibleTokenFull.state","stateful":false},{"arguments":[],"name":"meta_info","payable":false,"returns":"FungibleTokenFull.meta_info","stateful":false},{"arguments":[],"name":"total_supply","payable":false,"returns":"int","stateful":false},{"arguments":[],"name":"owner","payable":false,"returns":"address","stateful":false},{"arguments":[],"name":"balances","payable":false,"returns":"FungibleTokenFull.balances","stateful":false},{"arguments":[{"name":"account","type":"address"}],"name":"balance","payable":false,"returns":{"option":["int"]},"stateful":false},{"arguments":[],"name":"swapped","payable":false,"returns":{"map":["address","int"]},"stateful":false},{"arguments":[],"name":"allowances","payable":false,"returns":"FungibleTokenFull.allowances","stateful":false},{"arguments":[{"name":"allowance_accounts","type":"FungibleTokenFull.allowance_accounts"}],"name":"allowance","payable":false,"returns":{"option":["int"]},"stateful":false},{"arguments":[{"name":"from_account","type":"address"}],"name":"allowance_for_caller","payable":false,"returns":{"option":["int"]},"stateful":false},{"arguments":[{"name":"from_account","type":"address"},{"name":"to_account","type":"address"},{"name":"value","type":"int"}],"name":"transfer_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"for_account","type":"address"},{"name":"value","type":"int"}],"name":"create_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"for_account","type":"address"},{"name":"value_change","type":"int"}],"name":"change_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"for_account","type":"address"}],"name":"reset_allowance","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"to_account","type":"address"},{"name":"value","type":"int"}],"name":"transfer","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"value","type":"int"}],"name":"burn","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[],"name":"swap","payable":false,"returns":{"tuple":[]},"stateful":true},{"arguments":[{"name":"account","type":"address"}],"name":"check_swap","payable":false,"returns":"int","stateful":true},{"arguments":[{"name":"value","type":"int"},{"name":"pos","type":"PoS"},{"name":"id","type":"int"}],"name":"burn_trigger_pos","payable":false,"returns":{"tuple":[]},"stateful":true}],"kind":"contract_main","name":"FungibleTokenFull","payable":false,"state":{"record":[{"name":"owner","type":"address"},{"name":"total_supply","type":"int"},{"name":"balances","type":"FungibleTokenFull.balances"},{"name":"meta_info","type":"FungibleTokenFull.meta_info"},{"name":"allowances","type":"FungibleTokenFull.allowances"},{"name":"swapped","type":{"map":["address","int"]}}]},"typedefs":[{"name":"meta_info","typedef":{"record":[{"name":"name","type":"string"},{"name":"symbol","type":"string"},{"name":"decimals","type":"int"}]},"vars":[]},{"name":"allowance_accounts","typedef":{"record":[{"name":"from_account","type":"address"},{"name":"for_account","type":"address"}]},"vars":[]},{"name":"balances","typedef":{"map":["address","int"]},"vars":[]},{"name":"allowances","typedef":{"map":["FungibleTokenFull.allowance_accounts","int"]},"vars":[]}]}}]');var fe=a(60831),ve=function(e,t,a,n){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,r){function o(e){try{i(n.next(e))}catch(t){r(t)}}function l(e){try{i(n["throw"](e))}catch(t){r(t)}}function i(e){e.done?a(e.value):s(e.value).then(o,l)}i((n=n.apply(e,t||[])).next())}))};const ge=(0,n.pM)({name:"AeTransferReview",components:{TokenAmount:te.A,DetailsItem:C.A,TransferReviewBase:fe.A,AccountItem:w.A},model:{prop:"transferData"},props:{transferData:{type:Object,required:!0},recipientAddress:{type:String,default:null},amount:{type:Number,default:null},isMultisig:Boolean,isAddressChain:Boolean,isAddressUrl:Boolean},setup:function(e,t){var a=t.emit,s=(0,b.rd)(),r=(0,l.s9)(),p=r.t,m=(0,c.mv)(),f=m.homeRouteName,v=(0,c.U8)(),g=v.openDefaultModal,y=(0,c.si)(),x=y.openCallbackOrGoHome,_=(0,c.rb)(),T=_.addAccountPendingTransaction,w=(0,c.oV)(),O=w.activeAccount,S=(0,c.CP)(),M=S.getAeSdk,C=(0,c.ci)(),I=C.activeMultisigAccount,P=C.addTransactionToPendingMultisigAccount,F=C.updateMultisigAccounts,D=(0,c.kz)(),E=D.getTippingContracts,R=(0,c.Y7)(),L=R.createOrChangeAllowance,B=(0,o.KR)(!1),W=18294e-8,$=(0,n.EW)((function(){var t,a;return(null===(a=null===(t=e.transferData)||void 0===t?void 0:t.selectedAsset)||void 0===a?void 0:a.contractId)!==d.cK}));function U(){g({title:p("modals.transaction-failed.msg"),icon:"critical"})}function N(e,t,a,n,s){return ve(this,void 0,void 0,(0,A.A)().mark((function r(){var o,l;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,M();case 2:return o=r.sent,r.next=5,o.initializeContract({aci:me,address:e});case 5:return l=r.sent,r.abrupt("return",l.burn_trigger_pos(n.toFixed(),t,a,s));case 7:case"end":return r.stop()}}),r)})))}function V(t){var n,s=t.amount,r=t.recipient,o=t.selectedAsset;return ve(this,void 0,void 0,(0,A.A)().mark((function t(){var l,u,c,p,m;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(l=o.contractId===d.cK,B.value=!0,t.prev=2,null===e.transferData.invoiceId){t.next=9;break}return t.next=6,N(o.contractId,s.toString(),e.transferData.invoiceContract,e.transferData.invoiceId,{waitMined:!1});case 6:u=t.sent,t.next=20;break;case 9:if(l){t.next=16;break}return c=h.C.getAdapter(i.yv.aeternity),t.next=13,null===(n=c.transferToken)||void 0===n?void 0:n.call(c,Number(s),r,o.contractId,{waitMined:!1});case 13:u=t.sent,t.next=20;break;case 16:return p=h.C.getAdapter(i.yv.aeternity),t.next=19,p.spend(Number(s),r,{payload:e.transferData.payload});case 19:u=t.sent;case 20:return u&&(m={hash:u.hash,pending:!0,transactionOwner:O.value.address,protocol:i.yv.aeternity,tx:{amount:Number(s),callerId:O.value.address,contractId:o.contractId,senderId:O.value.address,type:l?de.vw[de.vw.SpendTx]:de.vw[de.vw.ContractCallTx],function:d.vG.transfer,recipientId:r,arguments:[],fee:0}},T(O.value.address,m)),a("success"),t.abrupt("return",null===u||void 0===u?void 0:u.hash);case 25:throw t.prev=25,t.t0=t["catch"](2),U(),t.t0;case 29:return t.prev=29,B.value=!1,t.finish(29);case 32:case"end":return t.stop()}}),t,null,[[2,25,29,32]])})))}function X(t){var n=t.amount,s=t.recipient,r=t.selectedAsset,o=t.note;return ve(this,void 0,void 0,(0,A.A)().mark((function t(){var l,c,p,m,f,v;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return B.value=!0,t.prev=1,l=null,t.next=5,E();case 5:if(c=t.sent,p=c.tippingV1,m=c.tippingV2,f=m||p,r.contractId===d.cK||!m){t.next=17;break}return t.next=12,L(r.contractId,e.amount);case 12:return t.next=14,m.tip_token(s,(0,u.y5)(o),r.contractId,n);case 14:l=t.sent,t.next=20;break;case 17:return t.next=19,f.tip(s,(0,u.y5)(o),{amount:n,waitMined:!1});case 19:l=t.sent;case 20:v={hash:l.hash,pending:!0,protocol:i.yv.aeternity,tipUrl:s,transactionOwner:O.value.address,tx:{amount:n,callerId:O.value.address,contractId:f.$options.address,type:de.vw[de.vw.ContractCallTx],function:"tip",selectedTokenContractId:r.contractId,arguments:[],fee:0}},T(O.value.address,v),x(!0),a("success"),t.next=32;break;case 26:throw t.prev=26,t.t0=t["catch"](1),x(!1),U(),t.t0.payload={url:s},t.t0;case 32:return t.prev=32,B.value=!1,t.finish(32);case 35:case"end":return t.stop()}}),t,null,[[1,26,32,35]])})))}function K(){return ve(this,void 0,void 0,(0,A.A)().mark((function t(){var n,r,o,l,i,d;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(B.value=!0,t.prev=1,n=(0,c.jC)(),r=n.buildSpendTx,o=n.proposeTx,l=n.postSpendTx,!I.value){t.next=16;break}return t.next=6,r(I.value.gaAccountId,e.transferData.address,(0,k.qX)(e.transferData.amount),e.transferData.payload||void 0);case 6:return i=t.sent,t.next=9,o(i,I.value.contractId);case 9:return d=t.sent,I.value.pending&&P(d,I.value.gaAccountId,O.value.address),t.next=13,l(i,d);case 13:return t.next=15,F();case 15:s.push({name:pe.Ie});case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](1),(0,u.fY)(t.t0);case 21:return t.prev=21,a("success"),B.value=!0,t.finish(21);case 25:case"end":return t.stop()}}),t,null,[[1,18,21,25]])})))}function j(){return ve(this,void 0,void 0,(0,A.A)().mark((function t(){var a,n,r,o,l,i,c;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.transferData,n=a.amount,r=a.address,o=a.selectedAsset,l=a.note,n&&r&&o){t.next=3;break}return t.abrupt("return");case 3:if(i=o.contractId===d.cK?(0,k.qX)(n):(0,u.Y9)(n,o.decimals),!e.isMultisig){t.next=9;break}return t.next=7,K();case 7:t.next=18;break;case 9:if(!e.isAddressUrl){t.next=14;break}return t.next=12,X({amount:i,recipient:r,selectedAsset:o,note:l});case 12:t.next=18;break;case 14:return t.next=16,V({amount:i,recipient:r,selectedAsset:o});case 16:c=t.sent,s.push({name:f.value,query:{latestTxHash:c}});case 18:case"end":return t.stop()}}),t)})))}return{PROTOCOLS:i.yv,isSelectedAssetAex9:$,activeMultisigAccount:I,AE_SYMBOL:d.kf,AE_CONTRACT_ID:d.cK,PROPOSE_TRANSACTION_FEE:W,loading:B,submit:j}}}),ye=(0,N.A)(ge,[["render",ce],["__scopeId","data-v-341447da"]]),Ae=ye,be=(0,n.pM)({name:i.iP,components:{TransferSendBase:p.A},props:Object.assign(Object.assign({},p.g),{tokenContractId:{type:String,default:null},isMultisig:Boolean}),setup:function(e){var t=(0,l.s9)(),a=t.t,s=(0,c.CP)(),p=s.isAeNodeReady,m=(0,c.Y7)(),f=m.getProtocolAvailableTokens,v=(0,o.KR)(),g=(0,o.KR)(i.x0.form),y=(0,o.KR)(!1),A=(0,o.KR)({address:e.address,amount:e.amount,payload:e.payload,selectedAsset:e.tokenContractId?f(i.yv.aeternity)[e.tokenContractId]:void 0}),b=(0,n.EW)((function(){var e;return!!(null===(e=A.value.address)||void 0===e?void 0:e.endsWith(d.CT))})),h=(0,n.EW)((function(){return!b.value&&A.value.address&&(0,u.Ks)(A.value.address)})),x=(0,n.EW)((function(){return y.value||!p.value||!A.value.address||!A.value.amount})),k=(0,n.EW)((function(){return e.isMultisig?a("modals.multisigTxProposal.proposeAndApprove"):""}));function _(){v.value.submit()}function T(){g.value=h.value?i.x0.reviewTip:i.x0.review}function w(){g.value=i.x0.review}function O(){y.value=!1,g.value=i.x0.form}var S=(0,r.A)((0,r.A)((0,r.A)({},i.x0.form,{component:X,onSuccess:T}),i.x0.reviewTip,{component:ie,onSuccess:w}),i.x0.review,{component:Ae,onSuccess:e.resolve}),M=(0,n.EW)((function(){return S[g.value]}));return{TRANSFER_SEND_STEPS:i.x0,PROTOCOLS:i.yv,currentRenderedComponent:v,steps:S,currentStep:g,error:y,transferData:A,currentStepConfig:M,isAddressChain:b,isAddressUrl:h,isSendingDisabled:x,customPrimaryButtonText:k,proceedToNextStep:_,editTransfer:O}}}),he=(0,N.A)(be,[["render",s]]),xe=he}}]);