"use strict";(self["webpackChunksuperhero_wallet"]=self["webpackChunksuperhero_wallet"]||[]).push([[641],{95452:(e,t,n)=>{n.r(t),n.d(t,{default:()=>we});var a=n(66252);function r(e,t,n,r,s,o){var i=(0,a.up)("TransferSendBase");return(0,a.wg)(),(0,a.j4)(i,(0,a.dG)(e.$attrs,{protocol:e.PROTOCOL_AETERNITY,"current-step":e.currentStep,"edit-transfer":e.editTransfer,"proceed-to-next-step":e.proceedToNextStep,"hide-arrow-send-icon":e.isMultisig,"custom-primary-button-text":e.customPrimaryButtonText,"primary-button-disabled":e.error||!e.transferData.address||!e.transferData.amount,onClose:e.resolve}),{content:(0,a.w5)((function(){return[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.currentStepConfig.component),{ref:"currentRenderedComponent",transferData:e.transferData,"onUpdate:transferData":t[0]||(t[0]=function(t){return e.transferData=t}),"is-multisig":e.isMultisig,"is-address-chain":e.isAddressChain,"is-address-url":e.isAddressUrl,onSuccess:e.currentStepConfig.onSuccess,onError:t[1]||(t[1]=function(t){return e.error=t})},null,40,["transferData","is-multisig","is-address-chain","is-address-url","onSuccess"]))]})),_:1},16,["protocol","current-step","edit-transfer","proceed-to-next-step","hide-arrow-send-icon","custom-primary-button-text","primary-button-disabled","onClose"])}var s=n(62118),o=(n(27852),n(2262)),i=n(79150),l=n(32720),u=n(69009),c=n(79323),d=n(28243),p=n(48854),m=(n(68309),n(3577)),v={class:"review-tip-wrapper"},f=["href"],g={class:"account-info"},A={class:"name-address-wrapper"},h={key:1},T={class:"token-amount-wrapper"},x={class:"lowercase"},w={class:"tip-url"},b={class:"subtitle"};function k(e,t,n,r,s,o){var i=(0,a.up)("i18n-t"),l=(0,a.up)("ModalHeader"),u=(0,a.up)("Avatar"),c=(0,a.up)("Truncate"),d=(0,a.up)("AddressTruncated"),p=(0,a.up)("TokenAmount"),k=(0,a.up)("FormTextarea");return(0,a.wg)(),(0,a.iD)("div",v,[(0,a.Wm)(l,{title:e.$t("pages.send.sendingCryptoToUrl")},{subtitle:(0,a.w5)((function(){return[(0,a.Wm)(i,{keypath:"pages.send.tipInfo",tag:"span",class:"subtitle",scope:"global"},{default:(0,a.w5)((function(){return[(0,a._)("a",{href:s.AGGREGATOR_URL,target:"_blank",class:"link"},(0,m.zw)(e.$t("pages.notifications.superhero")),9,f)]})),_:1})]})),_:1},8,["title"]),(0,a._)("div",g,[(0,a.Wm)(u,{address:r.activeAccount.address,size:"lg"},null,8,["address"]),(0,a._)("div",A,[r.activeAccount.name?((0,a.wg)(),(0,a.j4)(c,{key:0,str:r.activeAccount.name},null,8,["str"])):((0,a.wg)(),(0,a.iD)("div",h,(0,m.zw)(o.getDefaultAccountLabel({protocolIdx:r.activeAccount.idx})),1)),(0,a.Wm)(d,{"show-explorer-link":"",address:r.activeAccount.address},null,8,["address"])])]),(0,a._)("span",T,[(0,a.Uk)((0,m.zw)(e.$t("pages.send.sending"))+" ",1),(0,a.Wm)(p,{amount:+n.transferData.amount,symbol:o.tokenSymbol,"hide-fiat":o.isAex9,"data-cy":"review-total"},null,8,["amount","symbol","hide-fiat"]),(0,a._)("span",x,(0,m.zw)(e.$t("pages.send.to")),1)]),(0,a._)("div",w,(0,m.zw)(n.transferData.address),1),(0,a.Wm)(k,{modelValue:s.note,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.note=e}),size:"sm",label:e.$t("pages.send.messageUrlOwner"),message:o.noteError},{"label-after":(0,a.w5)((function(){return[(0,a._)("span",{class:(0,m.C_)(["counter",{"below-zero":o.charactersLeft<0}])},(0,m.zw)(o.charactersLeft),3)]})),_:1},8,["modelValue","label","message"]),(0,a._)("span",b,(0,m.zw)(e.$t("pages.tipPage.claimingExplanation")),1)])}var y=n(11538),_=n(33907),I=n(16982),M=n(14918),O=n(73186),D=n(22572),S=n(78210),C=n(52203),E=n(2404);const R={name:"TransferReviewTip",components:{AddressTruncated:E.Z,ModalHeader:M.Z,TokenAmount:O.Z,FormTextarea:D.Z,Avatar:S.Z,Truncate:C.Z},model:{prop:"transferData"},props:{transferData:{type:Object,required:!0}},setup:function(){var e=(0,_.oR)(),t=(0,I.xe)({store:e}),n=t.activeAccount;return{activeAccount:n}},data:function(){return{AGGREGATOR_URL:c.IE,AE_CONTRACT_ID:d.ik,note:"",noteMaxLength:280}},computed:{isAex9:function(){var e,t;return(null===(e=this.transferData)||void 0===e||null===(t=e.selectedAsset)||void 0===t?void 0:t.contractId)!==d.ik},noteError:function(){return this.note.length>this.noteMaxLength?this.$t("pages.tipPage.maxNoteLengthError"):null},charactersLeft:function(){return this.noteMaxLength-this.note.length},tokenSymbol:function(){var e;return(null===(e=this.transferData.selectedAsset)||void 0===e?void 0:e.symbol)||"-"}},watch:{noteError:function(e){this.$emit("error",!!e)},note:function(e){this.$emit("input",(0,y.Z)((0,y.Z)({},this.transferData),{},{note:e}))}},methods:{getDefaultAccountLabel:p.gg,submit:function(){this.noteError||this.$emit("success")}}};var P=n(83744);const Z=(0,P.Z)(R,[["render",k],["__scopeId","data-v-3f845ed2"]]),B=Z;var N={key:0,class:"multisig-account"};function W(e,t,n,r,s,o){var i=(0,a.up)("AccountItem"),l=(0,a.up)("DetailsItem"),u=(0,a.up)("TokenAmount"),c=(0,a.up)("TransferReviewBase");return(0,a.wg)(),(0,a.j4)(c,{title:e.isMultisig?e.$t("modals.multisigTxProposal.title"):void 0,"without-subtitle":e.isMultisig,"sender-label":e.isMultisig?e.$t("modals.multisigTxProposal.signingAddress"):void 0,"base-token-symbol":e.AE_SYMBOL,"transfer-data":e.transferData,loading:e.loading,"avatar-name":e.isAddressChain?e.transferData.address:void 0,"show-fiat":e.isSelectedAssetAex9,protocol:e.PROTOCOL_AETERNITY,class:"transfer-review"},(0,a.Nv)({subheader:(0,a.w5)((function(){return[e.isMultisig?((0,a.wg)(),(0,a.iD)("div",N,[(0,a.Wm)(i,{address:e.activeMultisigAccount.gaAccountId},null,8,["address"])])):(0,a.kq)("",!0)]})),"additional-fee":(0,a.w5)((function(){return[e.isMultisig?((0,a.wg)(),(0,a.j4)(l,{key:0,class:"details-item",label:e.$t("modals.multisigTxProposal.fee")},{value:(0,a.w5)((function(){return[(0,a.Wm)(u,{amount:e.PROPOSE_TRANSACTION_FEE,symbol:e.AE_SYMBOL,"hide-fiat":"","high-precision":"","data-cy":"multisig-review-fee"},null,8,["amount","symbol"])]})),_:1},8,["label"])):(0,a.kq)("",!0)]})),total:(0,a.w5)((function(){return[e.transferData.selectedAsset.contractId===e.AE_CONTRACT_ID?((0,a.wg)(),(0,a.j4)(l,{key:0,label:e.$t("common.total"),class:"details-item"},{value:(0,a.w5)((function(){return[(0,a.Wm)(u,{amount:+e.transferData.total,symbol:e.AE_SYMBOL,"high-precision":"","data-cy":"review-total"},null,8,["amount","symbol"])]})),_:1},8,["label"])):(0,a.kq)("",!0)]})),_:2},[e.isAddressUrl?{name:"recipient",fn:(0,a.w5)((function(){return[(0,a.Wm)(l,{"data-cy":"review-tip-url",class:"tip-url details-item",label:e.$t("pages.send.receivingUrl"),value:e.transferData.address},null,8,["label","value"])]})),key:"0"}:void 0]),1032,["title","without-subtitle","sender-label","base-token-symbol","transfer-data","loading","avatar-name","show-fiat","protocol"])}n(35666),n(41539),n(9653);var F=n(22201),$=n(65986),V=n(94308),j=n(34601),L=n(71584),U=n(12120),z=n(33170),Y=n(95951),H=function(e,t,n,a){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(o,i)}l((a=a.apply(e,t||[])).next())}))};const q=(0,a.aZ)({name:"AeTransferReview",components:{TokenAmount:O.Z,DetailsItem:Y.Z,TransferReviewBase:U.Z,AccountItem:z.Z},model:{prop:"transferData"},props:{transferData:{type:Object,required:!0},recipientAddress:{type:String,default:null},amount:{type:Number,default:null},isMultisig:Boolean,isAddressChain:Boolean,isAddressUrl:Boolean},setup:function(e,t){var n=t.emit,r=(0,_.oR)(),s=(0,F.tv)(),l=(0,i.QT)(),u=l.t,m=(0,I.bl)(),v=m.homeRouteName,f=(0,I.ol)(),g=f.openDefaultModal,A=(0,I.TW)({router:s}),h=A.openCallbackOrGoHome,T=(0,I.DQ)({store:r}),x=T.upsertCustomPendingTransactionForAccount,w=(0,I.xe)({store:r}),b=w.activeAccount,k=(0,I.Bo)({store:r}),y=k.activeMultisigAccount,M=k.addTransactionToPendingMultisigAccount,O=k.updateMultisigAccounts,D=(0,I.YA)({store:r}),S=D.getTippingContracts,C=(0,o.iH)(!1),E=18294e-8,R=(0,a.Fl)((function(){var t,n;return(null===(n=null===(t=e.transferData)||void 0===t?void 0:t.selectedAsset)||void 0===n?void 0:n.contractId)!==d.ik}));function P(){g({title:u("modals.transaction-failed.msg"),icon:"critical"})}function Z(t){var a=t.amount,s=t.recipient,o=t.selectedAsset;return H(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,l,u,p,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=o.contractId===d.ik,C.value=!0,t.prev=2,null===e.transferData.invoiceId){t.next=9;break}return t.next=6,r.dispatch("fungibleTokens/burnTriggerPoS",[o.contractId,a,e.transferData.invoiceContract,e.transferData.invoiceId,{waitMined:!1,modal:!1}]);case 6:l=t.sent,t.next=19;break;case 9:if(i){t.next=15;break}return t.next=12,r.dispatch("fungibleTokens/transfer",[o.contractId,s,a,{waitMined:!1,modal:!1}]);case 12:l=t.sent,t.next=19;break;case 15:return u=L.l.getAdapter(c.DJ),t.next=18,u.spend(a,s,{payload:e.transferData.payload});case 18:l=t.sent;case 19:return l&&!i?(p={hash:l.hash,pendingTokenTx:!0,pending:!0,transactionOwner:b.value.address,tx:{amount:a,callerId:b.value.address,contractId:o.contractId,type:$.Vp[$.Vp.ContractCallTx],function:d.ls.transfer,recipientId:s,arguments:[],fee:0}},x(b.value.address,p)):l&&(m={hash:l.hash,pending:!0,transactionOwner:b.value.address,tx:{amount:a,callerId:b.value.address,contractId:o.contractId,senderId:b.value.address,recipientId:s,type:$.Vp[$.Vp.SpendTx],function:d.ls.transfer,arguments:[],fee:0}},x(b.value.address,m)),n("success"),t.abrupt("return",l.hash);case 24:throw t.prev=24,t.t0=t["catch"](2),P(),t.t0;case 28:return t.prev=28,C.value=!1,t.finish(28);case 31:case"end":return t.stop()}}),t,null,[[2,24,28,31]])})))}function B(t){var a=t.amount,s=t.recipient,o=t.selectedAsset,i=t.note;return H(this,void 0,void 0,regeneratorRuntime.mark((function t(){var l,u,c,m,v,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return C.value=!0,t.prev=1,l=null,t.next=5,S();case 5:if(u=t.sent,c=u.tippingV1,m=u.tippingV2,v=m||c,o.contractId===d.ik||!m){t.next=17;break}return t.next=12,r.dispatch("fungibleTokens/createOrChangeAllowance",[o.contractId,e.amount]);case 12:return t.next=14,m.tip_token(s,(0,p.SC)(i),o.contractId,a);case 14:l=t.sent,t.next=20;break;case 17:return t.next=19,v.tip(s,(0,p.SC)(i),Object.assign({amount:a,waitMined:!1},{modal:!1}));case 19:l=t.sent;case 20:f={hash:l.hash,pending:!0,tipUrl:s,transactionOwner:b.value.address,tx:{amount:a,callerId:b.value.address,contractId:v.$options.address,type:$.Vp[$.Vp.ContractCallTx],function:"tip",selectedTokenContractId:o.contractId,arguments:[],fee:0}},x(b.value.address,f),h(!0),n("success"),t.next=32;break;case 26:throw t.prev=26,t.t0=t["catch"](1),h(!1),P(),t.t0.payload={url:s},t.t0;case 32:return t.prev=32,C.value=!1,t.finish(32);case 35:case"end":return t.stop()}}),t,null,[[1,26,32,35]])})))}function N(){return H(this,void 0,void 0,regeneratorRuntime.mark((function t(){var a,o,i,l,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(C.value=!0,t.prev=1,a=(0,I.RS)({store:r}),o=a.buildSpendTx,i=a.proposeTx,l=a.postSpendTx,!y.value){t.next=16;break}return t.next=6,o(y.value.gaAccountId,e.transferData.address,(0,j.Ze)(e.transferData.amount),e.transferData.payload||void 0);case 6:return u=t.sent,t.next=9,i(u,y.value.contractId);case 9:return c=t.sent,y.value.pending&&M(c,y.value.gaAccountId,b.value.address),t.next=13,l(u,c);case 13:return t.next=15,O();case 15:s.push({name:V.QA});case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](1),(0,p.ac)(t.t0);case 21:return t.prev=21,n("success"),C.value=!0,t.finish(21);case 25:case"end":return t.stop()}}),t,null,[[1,18,21,25]])})))}function W(){return H(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,a,r,o,i,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.transferData,a=n.amount,r=n.address,o=n.selectedAsset,i=n.note,a&&r&&o){t.next=3;break}return t.abrupt("return");case 3:if(l=o.contractId===d.ik?(0,j.Ze)(a):(0,p.Yt)(a,o.decimals),!e.isMultisig){t.next=9;break}return t.next=7,N();case 7:t.next=18;break;case 9:if(!e.isAddressUrl){t.next=14;break}return t.next=12,B({amount:l,recipient:r,selectedAsset:o,note:i});case 12:t.next=18;break;case 14:return t.next=16,Z({amount:l,recipient:r,selectedAsset:o});case 16:u=t.sent,s.push({name:v.value,query:{latestTxHash:u}});case 18:case"end":return t.stop()}}),t)})))}return{PROTOCOL_AETERNITY:c.DJ,isSelectedAssetAex9:R,activeMultisigAccount:y,AE_SYMBOL:d.WJ,AE_CONTRACT_ID:d.ik,PROPOSE_TRANSACTION_FEE:E,loading:C,submit:W}}}),J=(0,P.Z)(q,[["render",W],["__scopeId","data-v-496fb7ca"]]),G=J;n(56977),n(96647),n(83710),n(39714);var Q={class:"multisig-addresses-row"},X={key:0,class:"payload-add-wrapper"},K={class:"payload-options"};function ee(e,t,n,r,s,o){var i=(0,a.up)("ModalHeader"),l=(0,a.up)("InfoBox"),u=(0,a.up)("FormSelect"),c=(0,a.up)("AccountItem"),d=(0,a.up)("DetailsItem"),p=(0,a.up)("TransferSendRecipient"),v=(0,a.up)("BtnPlain"),f=(0,a.up)("TransferSendAmount"),g=(0,a.up)("BtnText"),A=(0,a.up)("BtnHelp"),h=(0,a.up)("BtnIcon"),T=(0,a.up)("PayloadDetails"),x=(0,a.up)("TransferSendFormBase");return(0,a.wg)(),(0,a.j4)(x,(0,a.dG)(e.$attrs,{"transfer-data":e.transferData,fee:+e.fee.toFixed(),"fee-symbol":e.AE_SYMBOL,protocol:e.PROTOCOL_AETERNITY,class:"transfer-send-form"}),(0,a.Nv)({recipient:(0,a.w5)((function(){return[(0,a.Wm)(p,{modelValue:e.formModel.address,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formModel.address=t}),modelModifiers:{trim:!0},errors:e.errors,"is-tip-url":e.isTipUrl,protocol:e.PROTOCOL_AETERNITY,placeholder:e.isUrlTippingEnabled?e.$t("modals.send.recipientPlaceholderUrl"):e.$t("modals.send.recipientPlaceholder"),"validation-rules":Object.assign(Object.assign({name_registered_address_or_url:e.isUrlTippingEnabled,name_registered_address:!e.isUrlTippingEnabled},e.isMultisig?{not_same_as:e.multisigVaultAddress}:{}),{token_to_an_address:[!e.isAe]}),onOpenQrModal:e.openScanQrModal},null,8,["modelValue","errors","is-tip-url","protocol","placeholder","validation-rules","onOpenQrModal"])]})),amount:(0,a.w5)((function(){var n;return[(0,a.Wm)(f,{modelValue:e.formModel.amount,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formModel.amount=t}),"custom-label":e.isMultisig?e.$t("modals.multisigTxProposal.amount"):"",errors:e.errors,"selected-asset":e.formModel.selectedAsset,readonly:e.isMultisig,protocol:e.PROTOCOL_AETERNITY,"validation-rules":Object.assign(Object.assign(Object.assign(Object.assign({},+e.balance.minus(e.fee)>0&&!e.isMultisig?{max_value:e.max}:{}),e.isMultisig?{enough_ae_signer:e.fee.toString()}:{enough_coin:e.fee.toString()}),+e.balance.minus(e.fee)>0&&e.isMultisig?{max_value_vault:null===(n=e.activeMultisigAccount)||void 0===n?void 0:n.balance.toString()}:{}),{min_tip_amount:e.isTipUrl}),onAssetSelected:e.handleAssetChange},{"label-after":(0,a.w5)((function(){return[e.isMultisig?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(v,{key:0,class:(0,m.C_)(["max-button",{chosen:e.isMaxValue}]),onClick:e.setMaxValue},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,m.zw)(e.$t("common.max")),1)]})),_:1},8,["class","onClick"]))]})),_:1},8,["modelValue","custom-label","errors","selected-asset","readonly","protocol","validation-rules","onAssetSelected"])]})),_:2},[e.isMultisig?{name:"header",fn:(0,a.w5)((function(){return[(0,a.Wm)(i,{title:e.$t("modals.multisigTxProposal.title")},null,8,["title"]),e.hasMultisigTokenWarning?((0,a.wg)(),(0,a.j4)(l,{key:0,type:e.INFO_BOX_TYPES.warning,text:e.$t("modals.multisigTxProposal.tokenWarning")},null,8,["type","text"])):(0,a.kq)("",!0),(0,a._)("div",Q,[(0,a.Wm)(d,{class:"multisig-address-item"},{label:(0,a.w5)((function(){return[e.multisigVaultOwnedByManyAccounts?((0,a.wg)(),(0,a.j4)(u,{key:0,options:e.accountsAllowedToProposeTxSelectOptions,"default-text":e.$t("modals.multisigTxProposal.signingAccount"),value:e.activeAccount.address,class:"account-selector","persistent-default-text":"",unstyled:"","account-select":"",onSelect:t[0]||(t[0]=function(t){return e.selectAccount(t)})},null,8,["options","default-text","value"])):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)((0,m.zw)(e.$t("modals.multisigTxProposal.signingAccount")),1)],64))]})),value:(0,a.w5)((function(){return[(0,a.Wm)(c,{address:e.activeAccount.address,protocol:e.activeAccount.protocol},null,8,["address","protocol"])]})),_:1}),(0,a.Wm)(d,{class:"multisig-address-item",label:e.$t("modals.multisigTxProposal.multisigVault")},{value:(0,a.w5)((function(){return[(0,a.Wm)(c,{address:e.multisigVaultAddress,protocol:"aeternity"},null,8,["address"])]})),_:1},8,["label"])])]})),key:"0"}:void 0,e.isAe?{name:"extra",fn:(0,a.w5)((function(){return[e.formModel.payload&&e.formModel.payload.length?((0,a.wg)(),(0,a.j4)(T,{key:1,payload:e.formModel.payload,class:"payload-details"},{default:(0,a.w5)((function(){return[(0,a._)("div",K,[(0,a.Wm)(h,{size:"sm",dimmed:"",icon:e.EditIcon,onClick:e.editPayload},null,8,["icon","onClick"]),(0,a.Wm)(h,{size:"sm","icon-variant":"danger",dimmed:"",icon:e.DeleteIcon,onClick:e.clearPayload},null,8,["icon","onClick"])])]})),_:1},8,["payload"])):((0,a.wg)(),(0,a.iD)("div",X,[(0,a.Wm)(g,{icon:e.PlusCircleIcon,text:e.$t("modals.send.payload"),onClick:e.editPayload},null,8,["icon","text","onClick"]),(0,a.Wm)(A,{title:e.$t("modals.payloadInfo.title"),msg:e.$t("modals.payloadInfo.msg")},null,8,["title","msg"])]))]})),key:"1"}:void 0]),1040,["transfer-data","fee","fee-symbol","protocol"])}n(26699),n(32023),n(57327),n(32564),n(47042),n(26541),n(23157);var te=n(2114),ne=n(89234),ae=n(82399),re=n(43647),se=n(46483),oe=n(23432),ie=n(91103),le=n(37896),ue=n(25244),ce=n(866),de=n(58663),pe=n(36172),me=n(82414),ve=n(50033),fe=function(e,t,n,a){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{l(a.next(e))}catch(t){s(t)}}function i(e){try{l(a["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(o,i)}l((a=a.apply(e,t||[])).next())}))};const ge=(0,a.aZ)({name:"AeTransferSendForm",components:{BtnPlain:ce.Z,TransferSendAmount:de.Z,TransferSendRecipient:ue.Z,DetailsItem:Y.Z,BtnIcon:oe.Z,PayloadDetails:ie.Z,BtnHelp:le.Z,BtnText:se.Z,TransferSendFormBase:ne.Z,InfoBox:re.Z,ModalHeader:M.Z,AccountItem:z.Z,FormSelect:ae.Z},model:{prop:"transferData"},props:{transferData:{type:Object,required:!0},isMultisig:Boolean},emits:["update:transferData","success","error"],setup:function(e,t){var n=t.emit,r=(0,_.oR)(),s=(0,F.yj)(),i=(0,o.iH)(!1),u=(0,o.iH)(!1),m=(0,o.iH)(null),v=(0,I.ol)(),f=v.openModal,g=(0,I.Bo)({store:r}),A=g.activeMultisigAccount,h=(0,I.ln)({store:r}),T=h.balance,x=(0,I.jg)({store:r}),w=x.marketData,b=(0,I.xe)({store:r}),k=b.accounts,y=b.activeAccount,M=b.setActiveAccountByGlobalIdx,O=b.setActiveAccountByAddress,D=b.prepareAccountSelectOptions,S=(0,l.eJ)("fungibleTokens"),C=(0,a.Fl)((function(){return S.value.availableTokens}));function E(t,n){var a=L.l.getAdapter(c.DJ).getDefaultCoin(w.value,+T.value);return t?e.isMultisig&&![d.WJ,d.ik].includes(t)?void(i.value=!0):(i.value=!1,C.value[t]||a):n?void 0:a}var R=(0,te.A)({transferData:e.transferData,getSelectedAssetValue:E,protocol:c.DJ}),P=R.formModel,Z=R.errors,B=R.hasError,N=R.invoiceId,W=R.invoiceContract,$=R.clearPayload,V=R.handleAssetChange,U=R.updateFormModelValues,z=R.openScanQrModal,Y=(0,I.Wp)({formModel:P,store:r}),H=Y.max,q=Y.fee,J=(0,a.Fl)((function(){var e;return null===(e=A.value)||void 0===e?void 0:e.gaAccountId})),G=(0,a.Fl)((function(){var e;return(null===(e=P.value.selectedAsset)||void 0===e?void 0:e.contractId)===d.ik})),Q=(0,a.Fl)((function(){return S.value.tokenBalances})),X=(0,a.Fl)((function(){return!!P.value.address&&u.value&&(0,p.pM)(P.value.address)&&!(0,j.qi)(P.value.address)})),K=(0,a.Fl)((function(){var e,t=+((null===(e=P.value)||void 0===e?void 0:e.amount)||0);return t>0&&t===+H.value})),ee=k.value.filter((function(e){var t,n=e.address;return null===(t=A.value)||void 0===t?void 0:t.signers.includes(n)})),ne=(0,a.Fl)((function(){return(null===ee||void 0===ee?void 0:ee.length)>1})),ae=(0,a.Fl)((function(){return D(ee)}));function se(){f(c.L1,{payload:P.value.payload}).then((function(e){P.value.payload=e}))["catch"]((function(){return null}))}function oe(e){e&&(O(e),P.value.amount&&m.value&&m.value.validate())}function ie(){var e=q.value;P.value.amount=H.value,setTimeout((function(){e!==q.value&&(P.value.amount=H.value)}),100)}function le(){var e,t=Object.assign(Object.assign({},P.value),{fee:q.value,total:(G.value?+q.value.toFixed():0)+ +((null===(e=P.value)||void 0===e?void 0:e.amount)||0),invoiceId:N.value,invoiceContract:W.value});return n("update:transferData",t),(0,a.Y3)()}function ue(){return fe(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(B.value){e.next=4;break}return e.next=3,le();case 3:n("success");case 4:case"end":return e.stop()}}),e)})))}return(0,a.YP)(B,(function(e){return n("error",e)}),{deep:!0}),(0,a.YP)(P,(function(){le()}),{deep:!0}),(0,a.YP)(y,(function(){var t,n,a;e.isMultisig&&!(null===(t=A.value)||void 0===t?void 0:t.signers.includes(y.value.address))&&M(ee[0].globalIdx);var r=s.query,o=c.IE.endsWith("/")?c.IE.slice(0,-1):c.IE;[r["x-success"],r["x-cancel"]].every((function(e){return e&&e.startsWith(o)}))&&(u.value=!0),U(Object.assign(Object.assign({},r),{token:r.token||(null===(a=null===(n=P.value)||void 0===n?void 0:n.selectedAsset)||void 0===a?void 0:a.contractId)}))}),{deep:!0,immediate:!0}),{INFO_BOX_TYPES:re._,AE_SYMBOL:d.WJ,PROTOCOL_AETERNITY:c.DJ,isAe:G,hasMultisigTokenWarning:i,multisigVaultAddress:J,activeMultisigAccount:A,multisigVaultOwnedByManyAccounts:ne,accountsAllowedToProposeTxSelectOptions:ae,formModel:P,isUrlTippingEnabled:u,fee:q,max:H,errors:Z,balance:T,isTipUrl:X,isMaxValue:K,activeAccount:y,editPayload:se,clearPayload:$,openScanQrModal:function(){return z(Q.value)},handleAssetChange:V,selectAccount:oe,setMaxValue:ie,submit:ue,EditIcon:pe.Z,DeleteIcon:me.Z,PlusCircleIcon:ve.Z}}}),Ae=(0,P.Z)(ge,[["render",ee],["__scopeId","data-v-2a272a88"]]),he=Ae,Te=(0,a.aZ)({name:c.Nj,components:{TransferSendBase:u.Z},props:{resolve:{type:Function,default:function(){return null}},tokenContractId:{type:String,default:null},address:{type:String,default:null},isMultisig:Boolean},setup:function(e){var t,n=(0,i.QT)(),r=n.t,u=(0,o.iH)(),m=(0,o.iH)(c.Nz.form),v=(0,o.iH)(!1),f=(0,o.iH)({amount:"",selectedAsset:void 0,payload:""}),g=(0,l.eJ)("fungibleTokens","availableTokens"),A=(0,a.Fl)((function(){var e;return!!(null===(e=f.value.address)||void 0===e?void 0:e.endsWith(d.Dq))})),h=(0,a.Fl)((function(){return!A.value&&f.value.address&&(0,p.pM)(f.value.address)})),T=(0,a.Fl)((function(){return e.isMultisig?r("modals.multisigTxProposal.proposeAndApprove"):""}));function x(){u.value.submit()}function w(){m.value=h.value?c.Nz.reviewTip:c.Nz.review}function b(){m.value=c.Nz.review}function k(){e.resolve()}function y(){v.value=!1,m.value=c.Nz.form}var _=(t={},(0,s.Z)(t,c.Nz.form,{component:he,onSuccess:w}),(0,s.Z)(t,c.Nz.reviewTip,{component:B,onSuccess:b}),(0,s.Z)(t,c.Nz.review,{component:G,onSuccess:k}),t),I=(0,a.Fl)((function(){return _[m.value]}));return e.tokenContractId&&g.value[e.tokenContractId]&&(f.value.selectedAsset=g.value[e.tokenContractId]),e.address&&(f.value.address=e.address),{TRANSFER_SEND_STEPS:c.Nz,PROTOCOL_AETERNITY:c.DJ,currentRenderedComponent:u,steps:_,currentStep:m,error:v,transferData:f,currentStepConfig:I,isAddressChain:A,isAddressUrl:h,customPrimaryButtonText:T,proceedToNextStep:x,editTransfer:y}}}),xe=(0,P.Z)(Te,[["render",r]]),we=xe}}]);